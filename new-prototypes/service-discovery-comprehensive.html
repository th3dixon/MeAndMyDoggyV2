<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Discovery - Find Pet Care Providers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Custom styles for premium providers */
        .premium-glow {
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
        .premium-badge {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
        }
        /* Map placeholder styles */
        .map-placeholder {
            background: #f3f4f6;
            background-image: linear-gradient(45deg, #e5e7eb 25%, transparent 25%, transparent 75%, #e5e7eb 75%, #e5e7eb),
                              linear-gradient(45deg, #e5e7eb 25%, transparent 25%, transparent 75%, #e5e7eb 75%, #e5e7eb);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }
        /* Calendar placeholder styles */
        .calendar-placeholder {
            background: linear-gradient(to bottom, #f9fafb 0%, #f3f4f6 100%);
        }
        /* Smooth transitions */
        .transition-all {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50" x-data="serviceDiscovery()">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-gray-800">Find Pet Care Providers</h1>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600">
                        <i class="fas fa-map-marker-alt text-orange-500"></i>
                        <span x-text="searchLocation || 'Set location'"></span>
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-6">
        <!-- Search Bar -->
        <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Location Search -->
                <div class="relative">
                    <input 
                        type="text" 
                        x-model="searchLocation"
                        placeholder="Enter UK postcode or city"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                    >
                    <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
                </div>
                
                <!-- Service Type -->
                <select 
                    x-model="selectedService"
                    @change="updateSubServices()"
                    class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                >
                    <option value="">All Services</option>
                    <template x-for="service in serviceCategories" :key="service">
                        <option :value="service" x-text="service"></option>
                    </template>
                </select>
                
                <!-- Search Button -->
                <button class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-all">
                    <i class="fas fa-search mr-2"></i>Search
                </button>
            </div>

            <!-- Filter Bar -->
            <div class="mt-4 flex flex-wrap items-center gap-2">
                <!-- Filter Toggle -->
                <button 
                    @click="showFilters = !showFilters"
                    class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all flex items-center"
                >
                    <i class="fas fa-filter mr-2"></i>
                    Filters
                    <span 
                        x-show="activeFilterCount > 0"
                        class="ml-2 bg-orange-500 text-white text-xs px-2 py-1 rounded-full"
                        x-text="activeFilterCount"
                    ></span>
                </button>

                <!-- Quick Filters -->
                <template x-for="filter in quickFilters" :key="filter.name">
                    <button 
                        @click="filter.active = !filter.active; updateActiveFilterCount()"
                        :class="filter.active ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-700'"
                        class="px-4 py-2 rounded-lg hover:opacity-80 transition-all"
                    >
                        <i :class="filter.icon" class="mr-2"></i>
                        <span x-text="filter.name"></span>
                    </button>
                </template>

                <!-- Clear Filters -->
                <button 
                    x-show="activeFilterCount > 0"
                    @click="clearAllFilters()"
                    class="px-4 py-2 text-orange-500 hover:text-orange-600 transition-all"
                >
                    <i class="fas fa-times mr-1"></i>Clear all
                </button>
            </div>

            <!-- Extended Filters Panel -->
            <div 
                x-show="showFilters" 
                x-transition
                class="mt-4 p-4 border-t border-gray-200"
            >
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Dog Size -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Dog Size</label>
                        <div class="space-y-2">
                            <template x-for="size in ['Small', 'Medium', 'Large', 'Giant']" :key="size">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-orange-500 focus:ring-orange-500">
                                    <span x-text="size"></span>
                                </label>
                            </template>
                        </div>
                    </div>

                    <!-- Price Range -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Price Range (per hour)</label>
                        <div class="space-y-2">
                            <input type="range" min="0" max="50" class="w-full">
                            <div class="flex justify-between text-sm text-gray-600">
                                <span>£0</span>
                                <span>£50+</span>
                            </div>
                        </div>
                    </div>

                    <!-- Availability -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Availability</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2 text-orange-500 focus:ring-orange-500">
                                <span>Available Today</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2 text-orange-500 focus:ring-orange-500">
                                <span>Available This Week</span>
                            </label>
                        </div>
                    </div>

                    <!-- Ratings -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Minimum Rating</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            <option>Any Rating</option>
                            <option>4+ Stars</option>
                            <option>4.5+ Stars</option>
                            <option>5 Stars</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Bar -->
        <div class="bg-white rounded-lg shadow-sm px-4 py-3 mb-4 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <span class="text-gray-600">
                    <strong x-text="filteredProviders.length"></strong> providers found
                </span>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-600">Sort by:</span>
                    <select 
                        x-model="sortBy"
                        @change="sortProviders()"
                        class="text-sm px-3 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-orange-500"
                    >
                        <option value="distance">Distance</option>
                        <option value="rating">Rating</option>
                        <option value="price">Price</option>
                        <option value="availability">Availability</option>
                    </select>
                </div>
            </div>
            
            <!-- View Toggle -->
            <div class="flex items-center space-x-2">
                <button 
                    @click="viewMode = 'list'"
                    :class="viewMode === 'list' ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-700'"
                    class="p-2 rounded hover:opacity-80 transition-all"
                >
                    <i class="fas fa-list"></i>
                </button>
                <button 
                    @click="viewMode = 'grid'"
                    :class="viewMode === 'grid' ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-700'"
                    class="p-2 rounded hover:opacity-80 transition-all"
                >
                    <i class="fas fa-th"></i>
                </button>
                <button 
                    @click="viewMode = 'map'"
                    :class="viewMode === 'map' ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-700'"
                    class="p-2 rounded hover:opacity-80 transition-all"
                >
                    <i class="fas fa-map"></i>
                </button>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
            <!-- Search Results (60%) -->
            <div class="lg:col-span-3">
                <!-- Loading State -->
                <div x-show="loading" class="text-center py-8">
                    <i class="fas fa-spinner fa-spin text-4xl text-orange-500"></i>
                    <p class="mt-2 text-gray-600">Finding providers...</p>
                </div>

                <!-- Provider Cards -->
                <div 
                    x-show="!loading && viewMode !== 'map'"
                    :class="viewMode === 'grid' ? 'grid grid-cols-1 md:grid-cols-2 gap-4' : 'space-y-4'"
                >
                    <template x-for="provider in paginatedProviders" :key="provider.id">
                        <div 
                            :class="provider.isPremium ? 'premium-glow' : ''"
                            class="bg-white rounded-lg shadow-sm hover:shadow-md transition-all p-4 border border-gray-200"
                        >
                            <!-- Premium Badge -->
                            <div x-show="provider.isPremium" class="absolute -top-2 -right-2">
                                <div class="premium-badge text-white text-xs px-3 py-1 rounded-full flex items-center">
                                    <i class="fas fa-crown mr-1"></i>Premium
                                </div>
                            </div>

                            <!-- Provider Header -->
                            <div class="flex items-start space-x-4 mb-4">
                                <img 
                                    :src="provider.photo" 
                                    :alt="provider.name"
                                    class="w-20 h-20 rounded-full object-cover"
                                >
                                <div class="flex-1">
                                    <h3 class="font-semibold text-lg text-gray-800" x-text="provider.name"></h3>
                                    <div class="flex items-center space-x-4 text-sm text-gray-600 mt-1">
                                        <span class="flex items-center">
                                            <i class="fas fa-star text-yellow-400 mr-1"></i>
                                            <span x-text="provider.rating"></span>
                                            <span class="text-gray-400 ml-1">(<span x-text="provider.reviews"></span>)</span>
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-map-marker-alt text-gray-400 mr-1"></i>
                                            <span x-text="provider.distance"></span>
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-clock text-gray-400 mr-1"></i>
                                            <span x-text="provider.responseTime"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Services -->
                            <div class="mb-4">
                                <div class="flex flex-wrap gap-2">
                                    <template x-for="service in provider.services" :key="service">
                                        <span class="bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded">
                                            <span x-text="service"></span>
                                        </span>
                                    </template>
                                </div>
                            </div>

                            <!-- Pricing -->
                            <div class="mb-4 text-sm text-gray-600">
                                <span class="font-semibold text-gray-800">From £<span x-text="provider.price"></span>/hour</span>
                                <span class="text-gray-400 ml-2">• <span x-text="provider.experience"></span> experience</span>
                            </div>

                            <!-- Action Buttons -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                <button class="bg-blue-500 text-white px-3 py-2 rounded text-sm hover:bg-blue-600 transition-all">
                                    <i class="fas fa-calendar-check mr-1"></i>Availability
                                </button>
                                <button class="bg-green-500 text-white px-3 py-2 rounded text-sm hover:bg-green-600 transition-all">
                                    <i class="fas fa-comment mr-1"></i>Contact
                                </button>
                                <button class="bg-purple-500 text-white px-3 py-2 rounded text-sm hover:bg-purple-600 transition-all">
                                    <i class="fas fa-list mr-1"></i>Services
                                </button>
                                <button class="bg-orange-500 text-white px-3 py-2 rounded text-sm hover:bg-orange-600 transition-all">
                                    <i class="fas fa-book mr-1"></i>Book Now
                                </button>
                            </div>
                        </div>
                    </template>
                </div>

                <!-- Map View -->
                <div 
                    x-show="viewMode === 'map'"
                    class="bg-white rounded-lg shadow-sm p-4"
                >
                    <div class="map-placeholder h-96 rounded-lg flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-map-marked-alt text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-600">Interactive map view</p>
                            <p class="text-sm text-gray-500">Shows all providers in selected area</p>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <div x-show="totalPages > 1" class="mt-6 flex items-center justify-center space-x-2">
                    <button 
                        @click="currentPage > 1 && currentPage--"
                        :disabled="currentPage === 1"
                        class="px-3 py-2 bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <template x-for="page in totalPages" :key="page">
                        <button 
                            @click="currentPage = page"
                            :class="currentPage === page ? 'bg-orange-500 text-white' : 'bg-white text-gray-700'"
                            class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50"
                            x-text="page"
                        ></button>
                    </template>
                    <button 
                        @click="currentPage < totalPages && currentPage++"
                        :disabled="currentPage === totalPages"
                        class="px-3 py-2 bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Map & Calendar (40%) -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Map -->
                <div class="bg-white rounded-lg shadow-sm p-4">
                    <h3 class="font-semibold text-gray-800 mb-3">Provider Locations</h3>
                    <div class="map-placeholder h-64 rounded-lg flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-map-marked-alt text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-600">Google Maps Integration</p>
                            <div class="mt-2 space-y-1">
                                <div class="flex items-center justify-center text-sm text-gray-500">
                                    <span class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></span>
                                    Premium Providers
                                </div>
                                <div class="flex items-center justify-center text-sm text-gray-500">
                                    <span class="w-3 h-3 bg-blue-500 rounded-full mr-2"></span>
                                    Free Providers
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Calendar -->
                <div class="bg-white rounded-lg shadow-sm p-4">
                    <h3 class="font-semibold text-gray-800 mb-3">Availability Calendar</h3>
                    <div class="calendar-placeholder h-64 rounded-lg p-4">
                        <div class="grid grid-cols-7 gap-1 text-center text-xs">
                            <template x-for="day in ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']" :key="day">
                                <div class="font-semibold text-gray-600 py-2" x-text="day"></div>
                            </template>
                            <template x-for="date in 35" :key="date">
                                <div 
                                    :class="date % 3 === 0 ? 'bg-green-100' : date % 5 === 0 ? 'bg-red-100' : 'bg-gray-50'"
                                    class="p-2 rounded text-gray-700 cursor-pointer hover:bg-gray-200"
                                    x-text="date <= 31 ? date : ''"
                                ></div>
                            </template>
                        </div>
                        <div class="mt-4 flex items-center justify-center space-x-4 text-xs text-gray-600">
                            <span class="flex items-center">
                                <span class="w-3 h-3 bg-green-100 rounded mr-1"></span>Available
                            </span>
                            <span class="flex items-center">
                                <span class="w-3 h-3 bg-red-100 rounded mr-1"></span>Busy
                            </span>
                            <span class="flex items-center">
                                <span class="w-3 h-3 bg-gray-50 rounded mr-1"></span>Unknown
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="bg-white rounded-lg shadow-sm p-4">
                    <h3 class="font-semibold text-gray-800 mb-3">Area Statistics</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Average Price</span>
                            <span class="font-semibold">£18.50/hour</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Available Today</span>
                            <span class="font-semibold text-green-600">12 providers</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Average Rating</span>
                            <span class="font-semibold">4.7 <i class="fas fa-star text-yellow-400 text-sm"></i></span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Response Time</span>
                            <span class="font-semibold">< 2 hours</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function serviceDiscovery() {
            return {
                // State
                loading: false,
                searchLocation: 'SW1A 1AA',
                selectedService: '',
                showFilters: false,
                viewMode: 'list',
                sortBy: 'distance',
                currentPage: 1,
                itemsPerPage: 6,
                activeFilterCount: 0,

                // Service categories
                serviceCategories: [
                    'Dog Walking',
                    'Pet Sitting',
                    'Grooming',
                    'Training',
                    'Veterinary',
                    'Boarding'
                ],

                // Quick filters
                quickFilters: [
                    { name: 'Available Now', icon: 'fas fa-bolt', active: false },
                    { name: 'Premium Only', icon: 'fas fa-crown', active: false },
                    { name: 'Verified', icon: 'fas fa-check-circle', active: false },
                    { name: 'Insurance', icon: 'fas fa-shield-alt', active: false }
                ],

                // Sample providers data
                providers: [
                    {
                        id: 1,
                        isPremium: true,
                        name: 'Sarah Thompson',
                        photo: 'https://i.pravatar.cc/150?img=1',
                        rating: 4.9,
                        reviews: 127,
                        distance: '0.5 miles',
                        responseTime: '< 1 hour',
                        services: ['Dog Walking', 'Pet Sitting', 'Overnight Care'],
                        price: 25,
                        experience: '8 years'
                    },
                    {
                        id: 2,
                        isPremium: true,
                        name: 'Professional Paws Ltd',
                        photo: 'https://i.pravatar.cc/150?img=2',
                        rating: 5.0,
                        reviews: 89,
                        distance: '0.8 miles',
                        responseTime: '< 30 min',
                        services: ['Grooming', 'Dog Walking', 'Training'],
                        price: 35,
                        experience: '12 years'
                    },
                    {
                        id: 3,
                        isPremium: true,
                        name: 'David Chen',
                        photo: 'https://i.pravatar.cc/150?img=3',
                        rating: 4.8,
                        reviews: 156,
                        distance: '1.2 miles',
                        responseTime: '< 2 hours',
                        services: ['Dog Walking', 'Pet Sitting'],
                        price: 22,
                        experience: '5 years'
                    },
                    {
                        id: 4,
                        isPremium: false,
                        name: 'Emma Wilson',
                        photo: 'https://i.pravatar.cc/150?img=4',
                        rating: 4.6,
                        reviews: 43,
                        distance: '1.5 miles',
                        responseTime: '< 3 hours',
                        services: ['Dog Walking', 'Basic Grooming'],
                        price: 15,
                        experience: '2 years'
                    },
                    {
                        id: 5,
                        isPremium: false,
                        name: 'Local Pet Care',
                        photo: 'https://i.pravatar.cc/150?img=5',
                        rating: 4.5,
                        reviews: 67,
                        distance: '2.0 miles',
                        responseTime: '< 4 hours',
                        services: ['Pet Sitting', 'Dog Walking'],
                        price: 18,
                        experience: '3 years'
                    },
                    {
                        id: 6,
                        isPremium: false,
                        name: 'James Miller',
                        photo: 'https://i.pravatar.cc/150?img=6',
                        rating: 4.7,
                        reviews: 92,
                        distance: '2.3 miles',
                        responseTime: '< 2 hours',
                        services: ['Dog Walking', 'Training', 'Pet Sitting'],
                        price: 20,
                        experience: '6 years'
                    }
                ],

                // Computed properties
                get filteredProviders() {
                    let filtered = [...this.providers];
                    
                    // Apply premium filter
                    if (this.quickFilters.find(f => f.name === 'Premium Only').active) {
                        filtered = filtered.filter(p => p.isPremium);
                    }
                    
                    // Apply service filter
                    if (this.selectedService) {
                        filtered = filtered.filter(p => 
                            p.services.includes(this.selectedService)
                        );
                    }
                    
                    // Sort
                    this.sortProviders(filtered);
                    
                    return filtered;
                },

                get paginatedProviders() {
                    const start = (this.currentPage - 1) * this.itemsPerPage;
                    const end = start + this.itemsPerPage;
                    return this.filteredProviders.slice(start, end);
                },

                get totalPages() {
                    return Math.ceil(this.filteredProviders.length / this.itemsPerPage);
                },

                // Methods
                updateSubServices() {
                    // Update sub-services based on selected category
                    console.log('Updating sub-services for:', this.selectedService);
                },

                updateActiveFilterCount() {
                    this.activeFilterCount = this.quickFilters.filter(f => f.active).length;
                },

                clearAllFilters() {
                    this.quickFilters.forEach(f => f.active = false);
                    this.selectedService = '';
                    this.activeFilterCount = 0;
                },

                sortProviders(providers) {
                    if (!providers) providers = this.filteredProviders;
                    
                    switch(this.sortBy) {
                        case 'rating':
                            providers.sort((a, b) => b.rating - a.rating);
                            break;
                        case 'price':
                            providers.sort((a, b) => a.price - b.price);
                            break;
                        case 'distance':
                            providers.sort((a, b) => 
                                parseFloat(a.distance) - parseFloat(b.distance)
                            );
                            break;
                    }
                }
            }
        }
    </script>
</body>
</html>